import { err, ok } from 'true-myth/result';
import { AutomateFunctionNotCreatorError, AutomateFunctionNotFoundError, AutomateNotEnabledError } from '../domain/authErrors.js';
export const ensureAutomateEnabledFragment = (loaders) => async () => {
    const env = await loaders.getEnv();
    if (!env.FF_AUTOMATE_MODULE_ENABLED)
        return err(new AutomateNotEnabledError());
    return ok();
};
export const ensureAutomateFunctionCreatorFragment = (loaders) => async ({ userId, functionId }) => {
    const automateFunction = await loaders.getAutomateFunction({ functionId });
    if (!automateFunction)
        return err(new AutomateFunctionNotFoundError());
    if (!userId || automateFunction.functionCreator?.speckleUserId !== userId)
        return err(new AutomateFunctionNotCreatorError());
    return ok();
};
//# sourceMappingURL=automate.js.map